<!DOCTYPE html>
<html lang="mn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --bg: #05070f; --panel: #0d1224; --accent: #7df9ff; --gold: #ffcf40; --danger: #ff3344; }
        * { box-sizing: border-box; }
        body { margin: 0; font-family: 'Inter', sans-serif; background: var(--bg); color: #fff; padding: 15px; padding-bottom: 100px; overflow-y: auto; }

        h2, h3 { font-weight: 900; letter-spacing: -1px; margin-top: 25px; color: var(--accent); }

        /* --- TABS --- */
        .tabs { display: flex; gap: 10px; margin-bottom: 20px; overflow-x: auto; padding-bottom: 5px; }
        .tab { background: var(--panel); padding: 10px 20px; border-radius: 12px; font-size: 13px; font-weight: 700; cursor: pointer; white-space: nowrap; border: 1px solid rgba(255,255,255,0.05); }
        .tab.active { background: var(--accent); color: #000; }

        /* --- DIAMOND CARDS --- */
        .diamond-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
        .d-card { background: var(--panel); border-radius: 18px; padding: 20px; text-align: center; border: 1px solid rgba(255,255,255,0.05); transition: 0.3s; }
        .d-card:active { transform: scale(0.95); }
        .d-card .amt { font-size: 20px; font-weight: 900; margin-bottom: 5px; }
        .d-card .price { color: var(--gold); font-weight: 700; font-size: 14px; }

        /* --- SHOP ITEMS (VEHICLES, ID) --- */
        .item-card { background: var(--panel); border-radius: 18px; padding: 15px; margin-bottom: 15px; display: flex; align-items: center; gap: 15px; border: 1px solid rgba(255,255,255,0.05); }
        .item-icon { width: 60px; height: 60px; background: rgba(255,255,255,0.03); border-radius: 15px; display: flex; align-items: center; justify-content: center; font-size: 30px; }
        .item-info { flex: 1; }
        .item-name { font-weight: 900; font-size: 16px; margin-bottom: 4px; }
        .item-desc { font-size: 11px; opacity: 0.6; margin-bottom: 8px; }
        
        .duration-selector { display: flex; gap: 5px; margin-bottom: 10px; }
        .dur-btn { flex: 1; font-size: 10px; padding: 5px; border-radius: 6px; border: 1px solid #333; color: #fff; background: none; cursor: pointer; }
        .dur-btn.active { border-color: var(--accent); color: var(--accent); background: rgba(125,249,255,0.1); }

        .buy-btn { background: var(--accent); color: #000; border: none; padding: 8px 15px; border-radius: 10px; font-weight: 800; font-size: 12px; cursor: pointer; }

        /* --- PAYMENT MODAL --- */
        #payModal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 1000; padding: 30px; }
        .pay-box { background: #fff; color: #000; border-radius: 25px; padding: 20px; text-align: center; }
        .pay-option { display: flex; align-items: center; gap: 15px; padding: 15px; border: 2px solid #eee; border-radius: 15px; margin-top: 10px; cursor: pointer; font-weight: 800; }
        .pay-option:hover { border-color: var(--accent); }
    </style>
</head>
<body>

    <div class="tabs">
        <div class="tab active">üíé Diamonds</div>
        <div class="tab">üèéÔ∏è –£–Ω–∞–∞ & –≠—Ñ—Ñ–µ–∫—Ç</div>
        <div class="tab">üî¢ Cool ID</div>
    </div>

    <section id="diamonds">
        <div class="diamond-grid">
            <div class="d-card" onclick="openPayment(5000, 5000)">
                <div class="amt">5,000 üíé</div><div class="price">5,000‚ÇÆ</div>
            </div>
            <div class="d-card" onclick="openPayment(10000, 10500)">
                <div class="amt">10,500 üíé</div><div class="price">10,000‚ÇÆ</div>
            </div>
            <div class="d-card" onclick="openPayment(20000, 22000)">
                <div class="amt">22,000 üíé</div><div class="price">20,000‚ÇÆ</div>
            </div>
            <div class="d-card" onclick="openPayment(50000, 58000)">
                <div class="amt">58,000 üíé</div><div class="price">50,000‚ÇÆ</div>
            </div>
        </div>
    </section>

    <h3>–£–Ω–∞–∞ & –û—Ä–æ—Ö –≠—Ñ—Ñ–µ–∫—Ç</h3>
    <div id="vehicles">
        <div class="item-card">
            <div class="item-icon">üöÄ</div>
            <div class="item-info">
                <div class="item-name">Rocket Entry</div>
                <div class="item-desc">”®—Ä”©”©–Ω–¥ –æ—Ä–æ—Ö–æ–¥ –ø—É—É–∂–∏–Ω –Ω–∏—Å—ç–∂, —Ö“Ø–Ω –±“Ø—Ä—Ç –º—ç–¥—ç–≥–¥—ç–Ω—ç.</div>
                <div class="duration-selector">
                    <button class="dur-btn active" onclick="setDur(this, 7, 15000)">7 —Ö–æ–Ω–æ–≥</button>
                    <button class="dur-btn" onclick="setDur(this, 15, 28000)">15 —Ö–æ–Ω–æ–≥</button>
                    <button class="dur-btn" onclick="setDur(this, 30, 50000)">1 —Å–∞—Ä</button>
                </div>
                <button class="buy-btn" onclick="purchaseItem('rocket')">–ê–≤–∞—Ö: <span id="price-rocket">15,000</span> üíé</button>
            </div>
        </div>

        <div class="item-card">
            <div class="item-icon">üèéÔ∏è</div>
            <div class="item-info">
                <div class="item-name">Drift Car</div>
                <div class="item-desc">–°“Ø—Ä–ª—ç–≥ –¥—Ä–∏—Ñ—Ç —Ö–∏–π–∂, –¥—É–≥—É–π–Ω –º”©—Ä “Ø–ª–¥—ç—ç–Ω—ç.</div>
                <div class="duration-selector">
                    <button class="dur-btn active" onclick="setDur(this, 7, 5000)">7 —Ö–æ–Ω–æ–≥</button>
                    <button class="dur-btn" onclick="setDur(this, 15, 9000)">15 —Ö–æ–Ω–æ–≥</button>
                    <button class="dur-btn" onclick="setDur(this, 30, 15000)">1 —Å–∞—Ä</button>
                </div>
                <button class="buy-btn" onclick="purchaseItem('car')">–ê–≤–∞—Ö: <span id="price-car">5,000</span> üíé</button>
            </div>
        </div>
    </div>

    <h3>–û–Ω—Ü–≥–æ–π ID –î—É–≥–∞–∞—Ä</h3>
    <div class="item-card">
        <div class="item-icon">üÜî</div>
        <div class="item-info">
            <div class="item-name">ID: 8888-9999</div>
            <div class="item-desc">–ê–ª—Ç–∞–Ω –¥—É–≥–∞–∞—Ä. –ß–∞—Ç –¥—ç—ç—Ä –æ–Ω—Ü–≥–æ–π—Ä—á —Ö–∞—Ä–∞–≥–¥–∞–Ω–∞.</div>
            <button class="buy-btn" onclick="purchaseID('88889999', 100000)">–ê–≤–∞—Ö: 100,000 üíé</button>
        </div>
    </div>

    <div id="payModal">
        <div class="pay-box">
            <h2 style="color:#000">–¢”©–ª–±”©—Ä —Ç”©–ª”©—Ö</h2>
            <p id="payTitle" style="color:#666">5,000 Diamond —Ü—ç–Ω—ç–≥–ª—ç—Ö</p>
            
            <div class="pay-option" onclick="processPayment()">
                <img src="https://qpay.mn/logo.png" width="30"> QPay-—ç—ç—Ä —Ç”©–ª”©—Ö
            </div>
            <div class="pay-option" onclick="processPayment()">
                <img src="https://socialpay.mn/logo.png" width="30"> SocialPay-—ç—ç—Ä —Ç”©–ª”©—Ö
            </div>
            
            <button onclick="closeModal()" style="margin-top:20px; border:none; background:none; font-weight:bold; color:red; cursor:pointer">–ë–æ–ª–∏—Ö</button>
        </div>
    </div>

    <script src="../js/economyEngine.js"></script>
    <script src="../js/adminEngine.js"></script>
    <script>
        let selectedAmount = 0;
        let selectedDiamonds = 0;
        let itemSettings = { rocket: { days: 7, price: 15000 }, car: { days: 7, price: 5000 } };

        // –¢”©–ª–±”©—Ä–∏–π–Ω —Ü–æ–Ω—Ö –Ω—ç—ç—Ö
        function openPayment(mnt, dia) {
            selectedAmount = mnt;
            selectedDiamonds = dia;
            document.getElementById('payTitle').innerText = `${dia.toLocaleString()} Diamond = ${mnt.toLocaleString()}‚ÇÆ`;
            document.getElementById('payModal').style.display = 'flex';
        }

        function closeModal() { document.getElementById('payModal').style.display = 'none'; }

        // –¢”©–ª–±”©—Ä –∞–º–∂–∏–ª—Ç—Ç–∞–π (QPay Simulate)
        function processPayment() {
            EconomyEngine.updateWallet(selectedDiamonds);
            alert(`–ê–º–∂–∏–ª—Ç—Ç–∞–π! –¢–∞–Ω—ã –¥–∞–Ω—Å–∞–Ω–¥ ${selectedDiamonds} üíé –æ—Ä–ª–æ–æ.`);
            closeModal();
        }

        // –•—É–≥–∞—Ü–∞–∞ —Å–æ–Ω–≥–æ—Ö
        function setDur(el, days, price) {
            const parent = el.closest('.item-info');
            const type = parent.querySelector('.buy-btn').getAttribute('onclick').match(/'([^']+)'/)[1];
            
            parent.querySelectorAll('.dur-btn').forEach(b => b.classList.remove('active'));
            el.classList.add('active');
            
            itemSettings[type].days = days;
            itemSettings[type].price = price;
            document.getElementById(`price-${type}`).innerText = price.toLocaleString();
        }

        // –ë–∞—Ä–∞–∞ —Ö—É–¥–∞–ª–¥–∞–∂ –∞–≤–∞—Ö
        function purchaseItem(type) {
            const price = itemSettings[type].price;
            const days = itemSettings[type].days;

            if(EconomyEngine.buyVehicle(type, price, days)) {
                alert(`${type.toUpperCase()} –∞–º–∂–∏–ª—Ç—Ç–∞–π –∞–≤–ª–∞–∞! –•—É–≥–∞—Ü–∞–∞: ${days} —Ö–æ–Ω–æ–≥.`);
            } else {
                alert("–£—É—á–ª–∞–∞—Ä–∞–π, Diamond —Ö“Ø—Ä—ç–ª—Ü—ç—Ö–≥“Ø–π –±–∞–π–Ω–∞.");
            }
        }

        // Cool ID —Ö—É–¥–∞–ª–¥–∞–∂ –∞–≤–∞—Ö
        function purchaseID(id, price) {
            if(EconomyEngine.updateWallet(-price)) {
                localStorage.setItem('cool_id', id);
                alert(`–ë–∞—è—Ä —Ö“Ø—Ä–≥—ç–µ! –ß–∏–Ω–∏–π —à–∏–Ω—ç ID: ${id}`);
            } else {
                alert("Diamond —Ö“Ø—Ä—ç–ª—Ü—ç—Ö–≥“Ø–π –±–∞–π–Ω–∞.");
            }
        }

        // –ê–¥–º–∏–Ω “Ø–Ω—ç —Ç–æ—Ö–∏—Ä—É—É–ª–∞—Ö (AdminEngine-—Å –¥–∞—Ç–∞ —É–Ω—à–∏—Ö)
        window.onload = () => {
            const adminData = AdminEngine.settings.shop_items;
            if(adminData.rocket) {
                // –ê–¥–º–∏–Ω –≥–∞—Ä–∞–∞—Ä “Ø–Ω—ç ”©”©—Ä—á–∏–ª—Å”©–Ω –±–æ–ª —ç–Ω–¥ —à–∏–Ω—ç—á–∏–ª–∂ –±–æ–ª–Ω–æ
            }
        };
    </script>
</body>
</html>
