<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="../css/variables.css">
    <style>
        body { background: var(--bg); color: #fff; padding: 15px; overflow-y: auto; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .card { background: var(--panel); padding: 15px; border-radius: 15px; border: 1px solid rgba(255,255,255,0.1); text-align: center; }
        .price { color: var(--gold); font-weight: 900; margin-top: 10px; }
        .buy-btn { background: var(--accent); color: #000; border: none; padding: 10px; width: 100%; border-radius: 8px; margin-top: 10px; font-weight: 700; }
        
        /* Payment Modal */
        #paymentModal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 1000; padding: 20px; }
        .pay-option { background: #fff; color: #000; padding: 15px; margin-bottom: 10px; border-radius: 10px; display: flex; align-items: center; gap: 15px; font-weight: 800; }
    </style>
</head>
<body>
    <h3>üíé Diamond –¶—ç–Ω—ç–≥–ª—ç—Ö</h3>
    <div class="grid">
        <div class="card" onclick="openPay(5000)"><div>5,000 üíé</div><div class="price">5,000‚ÇÆ</div></div>
        <div class="card" onclick="openPay(10000)"><div>10,500 üíé</div><div class="price">10,000‚ÇÆ</div></div>
        <div class="card" onclick="openPay(50000)"><div>55,000 üíé</div><div class="price">50,000‚ÇÆ</div></div>
    </div>

    <h3>üöó –£–Ω–∞–∞ & –≠—Ñ—Ñ–µ–∫—Ç (7 —Ö–æ–Ω–æ–≥)</h3>
    <div class="grid">
        <div class="card">
            <div>üöÄ Rocket Entry</div>
            <button class="buy-btn" onclick="buyAsset('rocket', 50000)">50,000 üíé</button>
        </div>
        <div class="card">
            <div>üèéÔ∏è Drift Car</div>
            <button class="buy-btn" onclick="buyAsset('car', 15000)">15,000 üíé</button>
        </div>
    </div>

    <div id="paymentModal">
        <h2>–¢”©–ª–±”©—Ä —Ç”©–ª”©—Ö</h2>
        <div class="pay-option" onclick="paySuccess()">
            <img src="https://qpay.mn/logo.png" width="30"> QPay-—ç—ç—Ä —Ç”©–ª”©—Ö
        </div>
        <div class="pay-option" onclick="paySuccess()">
            <img src="https://socialpay.mn/logo.png" width="30"> SocialPay-—ç—ç—Ä —Ç”©–ª”©—Ö
        </div>
        <button onclick="document.getElementById('paymentModal').style.display='none'" style="color:white; background:none; border:none; width:100%">–ë–æ–ª–∏—Ö</button>
    </div>

    <script src="../js/eventBus.js"></script>
    <script src="../js/economyEngine.js"></script>
    <script>
        let pendingAmount = 0;
        function openPay(amt) {
            pendingAmount = amt;
            document.getElementById('paymentModal').style.display = 'block';
        }
        function paySuccess() {
            EconomyEngine.updateWallet(pendingAmount);
            alert("–ê–º–∂–∏–ª—Ç—Ç–∞–π —Ü—ç–Ω—ç–≥–ª—ç–≥–¥–ª—ç—ç!");
            document.getElementById('paymentModal').style.display = 'none';
        }
        function buyAsset(type, price) {
            if(EconomyEngine.updateWallet(-price)) {
                const expire = Date.now() + (7 * 24 * 60 * 60 * 1000);
                localStorage.setItem('user_vehicle', JSON.stringify({type, expire}));
                alert(type + " —Ö—É–¥–∞–ª–¥–∞–∂ –∞–≤–ª–∞–∞! –õ–∞–π–≤ —Ä—É—É –æ—Ä–æ—Ö–æ–¥ —Ö–∞—Ä–∞–≥–¥–∞–Ω–∞.");
            } else { alert("–¢–æ–∫–µ–Ω —Ö“Ø—Ä—ç—Ö–≥“Ø–π –±–∞–π–Ω–∞!"); }
        }
    </script>
</body>
</html>
